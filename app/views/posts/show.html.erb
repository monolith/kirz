<% title "Viewing Post" %>

<% if logged_in? %>
  <table>
    <tr>
        <td><%= button_to "Edit", edit_post_path(@post), :method => :get %></td>
        <td><%= button_to "Delete", post_path(@post), :method => :delete, :confirm => "Sure? Cannot undo!" %></td>
    </tr>
  </table>
<% end %>

    <div id=show_image>
      <%= link_to image_tag(@post.image.url), :back %>
    </div>

    <div id=description>
      <% if @post.description and @post.description.length > 0 %>
        <p><%= sanitize(@post.description) %></p>
      <% end %>
    </div>


    <div id=category>
      Category: <%= link_to(sanitize(@post.category.name), category_path(@post.category.name), :class => "menu") if @post.category %>
    </div>

    <% unless @post.tag_list.empty? %>
      <div id="tags">
      Tags:
        <% @post.tag_list.each do |tag| %>
          <%= link_to sanitize(tag), tagged_with_path(tag), :class => "menu" %>
        <% end %>
      </div>
    <% end %>



    <div id=social_container>

      <div id=social>
        <script src="http://connect.facebook.net/en_US/all.js#xfbml=1">
        <fb:like width="225" show_faces="false"></fb:like>
      </div>
      <div id=social>
        <fb:share-button></fb:share-button>
      </div>

      <div id=social>

              <script type="text/javascript">
              (function() {
              var s = document.createElement('SCRIPT'), s1 = document.getElementsByTagName('SCRIPT')[0];
              s.type = 'text/javascript';
              s.async = true;
              s.src = 'http://widgets.digg.com/buttons.js';
              s1.parentNode.insertBefore(s, s1);
              })();
              </script>

              <!-- Compact Button -->
              <a class="DiggThisButton DiggCompact"></a>
        </div>

      <div id=social>

              <a href="http://twitter.com/share" class="twitter-share-button">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>

      </div>
  </div>

  <% if @column.size > 0 %>
    <h1>Similar</h1>

    <div id=similar>

        <table class=main>
          <tr>
            <% @column.each_with_index do |posts, index| %>
              <td valign=top>
                <div id="column_<%= index+1 %>">
                    <%= render :partial => 'post', :collection => posts, :locals => { :size => :thumb }  %>
                </div>
              </td>
            <% end %>
          </tr>
        <table>

    </div>
  <% end %>


    <div id="fb-root"></div>
    <script>
      window.fbAsyncInit = function() {
        FB.init({appId: '161640670526928', status: true, cookie: true,
                 xfbml: true});
      };
      (function() {
        var e = document.createElement('script');
        e.type = 'text/javascript';
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        e.async = true;
        document.getElementById('fb-root').appendChild(e);
      }());
    </script>

